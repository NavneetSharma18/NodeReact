{"ast":null,"code":"import{createSlice}from'@reduxjs/toolkit';import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import axios from'axios';axios.defaults.withCredentials=true;const API_BASE_URL=process.env.REACT_APP_API_BASE_URL;const initialState={isLoading:false,authData:null,isError:false,isUserLogin:false,userRoleId:null,userId:null};/*-------------------------------------------------\n| Create Redux Thunk For Api Call ASYNC\n---------------------------------------------------*/export const checkLogin=senddata=>async dispatch=>{//console.log(API_BASE_URL);\ntry{const res=await axios(API_BASE_URL+\"/user/login\",{method:\"post\",data:{email:senddata.email,password:senddata.password},withCredentials:true});const resp=res.data;if(resp.status==true){const user=resp.data;toast.success(resp.msg,{position:toast.POSITION.TOP_RIGHT});dispatch(loginUser(user));}else{toast.error(resp.msg,{position:toast.POSITION.TOP_RIGHT});}}catch(error){toast.error('Error during login:'+error,{position:toast.POSITION.TOP_RIGHT});}};export const checkLogout=()=>async dispatch=>{try{const res=await axios(API_BASE_URL+\"/user/logout\",{method:\"get\",withCredentials:true});const resp=res.data;if(resp.status==true){const user=resp.data;toast.success(resp.msg,{position:toast.POSITION.TOP_RIGHT});dispatch(logoutUser());}else{toast.error(resp.msg,{position:toast.POSITION.TOP_RIGHT});}}catch(error){toast.error('Error during logout:'+error,{position:toast.POSITION.TOP_RIGHT});}};/*-------------------------------------------------\n| Create Redux Slice and Reducer Function\n---------------------------------------------------*/export const loginApiSlice=createSlice({name:'user_action_api',initialState,reducers:{loginUser:(state,action)=>{state.isLoading=false;state.authData=action.payload;state.isError=false;state.isUserLogin=true;state.userRoleId=action.payload.role_id;state.userId=action.payload._id;},logoutUser:(state,action)=>{state.isLoading=false;state.authData=null;state.isError=false;state.isUserLogin=false;state.userRoleId=null;state.userId=null;}}});export const{loginUser,logoutUser}=loginApiSlice.actions;export default loginApiSlice.reducer;","map":{"version":3,"names":["createSlice","ToastContainer","toast","axios","defaults","withCredentials","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","initialState","isLoading","authData","isError","isUserLogin","userRoleId","userId","checkLogin","senddata","dispatch","res","method","data","email","password","resp","status","user","success","msg","position","POSITION","TOP_RIGHT","loginUser","error","checkLogout","logoutUser","loginApiSlice","name","reducers","state","action","payload","role_id","_id","actions","reducer"],"sources":["/Users/navneetprogrammer/Desktop/NodeReact/frontend/src/redux/userApi/index.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport axios from 'axios';\naxios.defaults.withCredentials = true\n\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL\n\nconst initialState = {\n  isLoading  :false,\n  authData   :null,\n  isError    :false,\n  isUserLogin:false,\n  userRoleId :null,\n  userId     :null,\n\n}\n\n\n\n/*-------------------------------------------------\n| Create Redux Thunk For Api Call ASYNC\n---------------------------------------------------*/\n\nexport const checkLogin = (senddata) => async (dispatch) => {\n\n  //console.log(API_BASE_URL);\n\n    try {   \n\n            const res  = await axios(API_BASE_URL+\"/user/login\", {\n                                  method: \"post\",\n                                  data: {email: senddata.email,password: senddata.password},\n                                  withCredentials: true\n                              });\n           const resp = res.data;\n\n            if (resp.status == true) {\n\n                 const user = resp.data;\n                 toast.success(resp.msg, {\n                   position: toast.POSITION.TOP_RIGHT,\n                 });\n                 dispatch(loginUser(user));\n\n            }else{\n\n                toast.error(resp.msg, {\n                  position: toast.POSITION.TOP_RIGHT,\n                });\n            }\n\n    }catch (error) {\n\n            toast.error('Error during login:'+error, {\n              position: toast.POSITION.TOP_RIGHT,\n            });\n    }\n\n\n}\n\nexport const checkLogout = () => async (dispatch) => {\n\n    try {   \n\n            const res  = await axios(API_BASE_URL+\"/user/logout\", {\n                               method: \"get\",\n                               withCredentials: true\n                            });\n            const resp = res.data;\n\n            if (resp.status == true) {\n\n                 const user = resp.data;\n                 toast.success(resp.msg, {\n                   position: toast.POSITION.TOP_RIGHT,\n                 });\n                 dispatch(logoutUser());\n\n            }else{\n\n                toast.error(resp.msg, {\n                  position: toast.POSITION.TOP_RIGHT,\n                });\n            }\n\n    }catch (error) {\n\n            toast.error('Error during logout:'+error, {\n              position: toast.POSITION.TOP_RIGHT,\n            });\n    }\n\n\n}\n\n\n/*-------------------------------------------------\n| Create Redux Slice and Reducer Function\n---------------------------------------------------*/\n\n\nexport const loginApiSlice = createSlice({\n\n  name: 'user_action_api',\n  initialState,\n  reducers: {\n\n          loginUser: (state, action) => {\n\n                  state.isLoading   = false;\n                  state.authData    = action.payload;\n                  state.isError     = false; \n                  state.isUserLogin = true;\n                  state.userRoleId  = action.payload.role_id;\n                  state.userId      = action.payload._id;\n          },\n          logoutUser: (state,action) => {\n\n                  state.isLoading   = false;\n                  state.authData    = null;\n                  state.isError     = false; \n                  state.isUserLogin = false;\n                  state.userRoleId  = null;\n                  state.userId      = null;\n          }\n  }\n})\n\nexport const { loginUser, logoutUser } = loginApiSlice.actions;\nexport default loginApiSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}