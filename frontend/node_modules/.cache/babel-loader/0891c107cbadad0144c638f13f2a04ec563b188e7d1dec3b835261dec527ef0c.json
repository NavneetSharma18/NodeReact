{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import axios from'axios';axios.defaults.withCredentials=true;const API_BASE_URL=process.env.REACT_APP_API_BASE_URL;const initialState={cartItems:[],newItem:null,totalPrice:null,subTotal:null,shippingCost:4};/*-------------------------------------------------\n| Create Redux Thunk For Api Call ASYNC\n---------------------------------------------------*/export const addProductToCart=product=>async dispatch=>{try{dispatch(addToCart(product));}catch(error){toast.error('Error during login:'+error,{position:toast.POSITION.TOP_RIGHT});}};/*-------------------------------------------------\n| Increase Product Qty\n---------------------------------------------------*/export const qtyIncrease=product=>async dispatch=>{try{dispatch(incProductQty(product));}catch(error){toast.error('Error in increment product qty:'+error,{position:toast.POSITION.TOP_RIGHT});}};/*-------------------------------------------------\n| Decrease Product Qty\n---------------------------------------------------*/export const qtyDecrease=product=>async dispatch=>{try{dispatch(decProductQty(product));}catch(error){toast.error('Error in decrement product qty:'+error,{position:toast.POSITION.TOP_RIGHT});}};/*-------------------------------------------------\n| Remove Product From Cart \n---------------------------------------------------*/export const removeProduct=product=>async dispatch=>{try{dispatch(removeProductCart(product));}catch(error){toast.error('Error in removing product:'+error,{position:toast.POSITION.TOP_RIGHT});}};/*-------------------------------------------------\n| Create Redux Slice and Reducer Function\n---------------------------------------------------*/export const productApiSlice=createSlice({name:'product_api',initialState,reducers:{addToCart:(state,action)=>{state.newItem=action.payload;const isItemPresent=state.cartItems.some(item=>item._id===state.newItem._id&&item.product_price===state.newItem.product_price);if(!isItemPresent){state.cartItems.push(state.newItem);toast.success(state.newItem.product_title+' is added to your cart successfully!',{position:toast.POSITION.TOP_RIGHT});}state.subTotal=state.cartItems.reduce((acc,item)=>acc+item.product_price*item.qty,0);state.totalPrice=state.subTotal*1+state.shippingCost*1;},incProductQty:(state,action)=>{state.newItem=action.payload;let index=state.cartItems.findIndex(product=>product._id===state.newItem._id);if(index!==-1){state.cartItems[index].qty+=1;state.subTotal=state.cartItems.reduce((acc,item)=>acc+item.product_price*item.qty,0);state.totalPrice=state.subTotal*1+state.shippingCost*1;toast.info('Product qty increased',{position:toast.POSITION.TOP_RIGHT});}},decProductQty:(state,action)=>{state.newItem=action.payload;const index=state.cartItems.findIndex(product=>product._id===state.newItem._id);if(state.cartItems[index].qty>1){if(index!==-1){state.cartItems[index].qty-=1;state.subTotal=state.cartItems.reduce((acc,item)=>acc+item.product_price*item.qty,0);state.totalPrice=state.subTotal*1+state.shippingCost*1;}toast.info('Product qty decreased',{position:toast.POSITION.TOP_RIGHT});}else if(state.cartItems[index].qty===1){const newCartItems=state.cartItems.filter(item=>item._id!==state.newItem._id);state.cartItems=newCartItems;state.subTotal=state.cartItems.reduce((acc,item)=>acc+item.product_price*item.qty,0);state.totalPrice=state.subTotal*1+state.shippingCost*1;}},removeProductCart:(state,action)=>{state.newItem=action.payload;const newCartItems=state.cartItems.filter(item=>item._id!==state.newItem._id);state.cartItems=newCartItems;state.subTotal=state.cartItems.reduce((acc,item)=>acc+item.product_price*item.qty,0);state.totalPrice=state.subTotal*1+state.shippingCost*1;toast.info('Product removed form cart',{position:toast.POSITION.TOP_RIGHT});}}});export const{addToCart,incProductQty,decProductQty,removeProductCart}=productApiSlice.actions;export default productApiSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","ToastContainer","toast","axios","defaults","withCredentials","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","initialState","cartItems","newItem","totalPrice","subTotal","shippingCost","addProductToCart","product","dispatch","addToCart","error","position","POSITION","TOP_RIGHT","qtyIncrease","incProductQty","qtyDecrease","decProductQty","removeProduct","removeProductCart","productApiSlice","name","reducers","state","action","payload","isItemPresent","some","item","_id","product_price","push","success","product_title","reduce","acc","qty","index","findIndex","info","newCartItems","filter","actions","reducer"],"sources":["/Users/navneetprogrammer/Desktop/NodeReact/frontend/src/redux/productApi/index.js"],"sourcesContent":["import { createSlice,createAsyncThunk } from '@reduxjs/toolkit'\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport axios from 'axios';\naxios.defaults.withCredentials = true\n\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL\n\nconst initialState = {\n\n  cartItems   : [],\n  newItem     : null,\n  totalPrice  : null,\n  subTotal    : null,\n  shippingCost: 4\n\n}\n\n\n\n/*-------------------------------------------------\n| Create Redux Thunk For Api Call ASYNC\n---------------------------------------------------*/\n\nexport const addProductToCart = (product) => async (dispatch) => {\n\n    try {   \n          \n          dispatch(addToCart(product));\n          \n\n    }catch (error) {\n\n            toast.error('Error during login:'+error, {\n              position: toast.POSITION.TOP_RIGHT,\n            });\n    }\n\n\n}\n\n\n/*-------------------------------------------------\n| Increase Product Qty\n---------------------------------------------------*/\n\nexport const qtyIncrease = (product) => async (dispatch) => {\n\n    try {   \n          \n          dispatch(incProductQty(product));\n          \n\n    }catch (error) {\n\n            toast.error('Error in increment product qty:'+error, {\n              position: toast.POSITION.TOP_RIGHT,\n            });\n    }\n\n\n}\n\n/*-------------------------------------------------\n| Decrease Product Qty\n---------------------------------------------------*/\n\nexport const qtyDecrease = (product) => async (dispatch) => {\n\n    try {   \n          \n          dispatch(decProductQty(product));\n          \n\n    }catch (error) {\n\n            toast.error('Error in decrement product qty:'+error, {\n              position: toast.POSITION.TOP_RIGHT,\n            });\n    }\n\n\n}\n\n\n/*-------------------------------------------------\n| Remove Product From Cart \n---------------------------------------------------*/\n\nexport const removeProduct = (product) => async (dispatch) => {\n\n  try {   \n        \n        dispatch(removeProductCart(product));\n        \n\n  }catch (error) {\n\n          toast.error('Error in removing product:'+error, {\n            position: toast.POSITION.TOP_RIGHT,\n          });\n  }\n\n\n}\n\n\n\n/*-------------------------------------------------\n| Create Redux Slice and Reducer Function\n---------------------------------------------------*/\n\n\nexport const productApiSlice = createSlice({\n\n  name: 'product_api',\n  initialState,\n  reducers: {\n\n          addToCart: (state, action) => {\n\n                  state.newItem       = action.payload;\n                  const isItemPresent = state.cartItems.some(item => item._id === state.newItem._id && item.product_price === state.newItem.product_price);\n                  if(!isItemPresent){\n                    \n                    state.cartItems.push(state.newItem);\n                    toast.success(state.newItem.product_title+' is added to your cart successfully!', {\n                      position: toast.POSITION.TOP_RIGHT,\n                    });\n                  }\n                  state.subTotal   = state.cartItems.reduce((acc, item) => acc + item.product_price*item.qty, 0);\n                  state.totalPrice = state.subTotal*1+state.shippingCost*1    \n              \n          },\n          incProductQty: (state, action) => {\n\n                  state.newItem  = action.payload;\n                  let index =  state.cartItems.findIndex(product => product._id === state.newItem._id);\n                  if (index !== -1) {\n                     state.cartItems[index].qty += 1;\n                     state.subTotal   = state.cartItems.reduce((acc, item) => acc + item.product_price*item.qty, 0);\n                     state.totalPrice = state.subTotal*1+state.shippingCost*1  \n\n                     toast.info('Product qty increased', {\n                      position: toast.POSITION.TOP_RIGHT,\n                    });\n                      \n                  } \n            \n          },\n          decProductQty: (state, action) => {\n\n            state.newItem  = action.payload;\n\n            const index =  state.cartItems.findIndex(product => product._id === state.newItem._id);\n\n            if(state.cartItems[index].qty > 1){\n\n                if (index !== -1) {\n\n                    state.cartItems[index].qty -= 1;\n                    state.subTotal   = state.cartItems.reduce((acc, item) => acc + item.product_price*item.qty, 0);\n                    state.totalPrice = state.subTotal*1+state.shippingCost*1  \n                    \n                } \n                toast.info('Product qty decreased', {\n                  position: toast.POSITION.TOP_RIGHT,\n                });\n\n            }else if(state.cartItems[index].qty === 1){\n\n              const newCartItems = state.cartItems.filter(item => item._id !== state.newItem._id)\n              state.cartItems    = newCartItems\n              state.subTotal   = state.cartItems.reduce((acc, item) => acc + item.product_price*item.qty, 0);\n              state.totalPrice = state.subTotal*1+state.shippingCost*1  \n              \n            }\n            \n            \n        \n          },\n          removeProductCart: (state, action) => {\n\n            state.newItem      = action.payload;\n            const newCartItems = state.cartItems.filter(item => item._id !== state.newItem._id)\n            state.cartItems    = newCartItems;\n            state.subTotal   = state.cartItems.reduce((acc, item) => acc + item.product_price*item.qty, 0);\n            state.totalPrice = state.subTotal*1+state.shippingCost*1  \n            \n\n            toast.info('Product removed form cart', {\n              position: toast.POSITION.TOP_RIGHT,\n            });\n          }\n  }\n})\n\nexport const { addToCart,incProductQty,decProductQty,removeProductCart } = productApiSlice.actions;\nexport default productApiSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}