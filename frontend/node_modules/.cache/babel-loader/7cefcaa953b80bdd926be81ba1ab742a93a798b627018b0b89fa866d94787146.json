{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport axios from 'axios';\naxios.defaults.withCredentials = true;\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\nconst initialState = {\n  isLoading: false,\n  authData: null,\n  isError: false,\n  isUserLogin: false,\n  userRoleId: null,\n  userId: null\n};\n\n/*-------------------------------------------------\n| Create Redux Thunk For Api Call ASYNC\n---------------------------------------------------*/\n\nexport const checkLogin = senddata => async dispatch => {\n  //console.log(API_BASE_URL);\n\n  try {\n    const res = await axios(API_BASE_URL + \"/user/login\", {\n      method: \"post\",\n      data: {\n        email: senddata.email,\n        password: senddata.password\n      },\n      withCredentials: true\n    });\n    const resp = res.data;\n    if (resp.status == true) {\n      const user = resp.data;\n      toast.success(resp.msg, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n      dispatch(loginUser(user));\n    } else {\n      toast.error(resp.msg, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n    }\n  } catch (error) {\n    toast.error('Error during login:' + error, {\n      position: toast.POSITION.TOP_RIGHT\n    });\n  }\n};\nexport const checkLogout = () => async dispatch => {\n  try {\n    const res = await axios(API_BASE_URL + \"/user/logout\", {\n      method: \"get\",\n      withCredentials: true\n    });\n    const resp = res.data;\n    if (resp.status == true) {\n      const user = resp.data;\n      toast.success(resp.msg, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n      dispatch(logoutUser());\n    } else {\n      toast.error(resp.msg, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n    }\n  } catch (error) {\n    toast.error('Error during logout:' + error, {\n      position: toast.POSITION.TOP_RIGHT\n    });\n  }\n};\n\n/*-------------------------------------------------\n| Create Redux Slice and Reducer Function\n---------------------------------------------------*/\n\nexport const loginApiSlice = createSlice({\n  name: 'user_action_api',\n  initialState,\n  reducers: {\n    loginUser: (state, action) => {\n      state.isLoading = false;\n      state.authData = action.payload;\n      state.isError = false;\n      state.isUserLogin = true;\n      state.userRoleId = action.payload.role_id;\n      state.userId = action.payload._id;\n    },\n    logoutUser: (state, action) => {\n      state.isLoading = false;\n      state.authData = null;\n      state.isError = false;\n      state.isUserLogin = false;\n      state.userRoleId = null;\n      state.userId = null;\n    }\n  }\n});\nexport const {\n  loginUser,\n  logoutUser\n} = loginApiSlice.actions;\nexport default loginApiSlice.reducer;","map":{"version":3,"names":["createSlice","ToastContainer","toast","axios","defaults","withCredentials","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","initialState","isLoading","authData","isError","isUserLogin","userRoleId","userId","checkLogin","senddata","dispatch","res","method","data","email","password","resp","status","user","success","msg","position","POSITION","TOP_RIGHT","loginUser","error","checkLogout","logoutUser","loginApiSlice","name","reducers","state","action","payload","role_id","_id","actions","reducer"],"sources":["/Users/navneetprogrammer/Desktop/NodeReact/frontend/src/redux/userApi/index.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport axios from 'axios';\naxios.defaults.withCredentials = true\n\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL\n\nconst initialState = {\n  isLoading  :false,\n  authData   :null,\n  isError    :false,\n  isUserLogin:false,\n  userRoleId :null,\n  userId     :null,\n\n}\n\n\n\n/*-------------------------------------------------\n| Create Redux Thunk For Api Call ASYNC\n---------------------------------------------------*/\n\nexport const checkLogin = (senddata) => async (dispatch) => {\n\n  //console.log(API_BASE_URL);\n\n    try {   \n\n            const res  = await axios(API_BASE_URL+\"/user/login\", {\n                                  method: \"post\",\n                                  data: {email: senddata.email,password: senddata.password},\n                                  withCredentials: true\n                              });\n           const resp = res.data;\n\n            if (resp.status == true) {\n\n                 const user = resp.data;\n                 toast.success(resp.msg, {\n                   position: toast.POSITION.TOP_RIGHT,\n                 });\n                 dispatch(loginUser(user));\n\n            }else{\n\n                toast.error(resp.msg, {\n                  position: toast.POSITION.TOP_RIGHT,\n                });\n            }\n\n    }catch (error) {\n\n            toast.error('Error during login:'+error, {\n              position: toast.POSITION.TOP_RIGHT,\n            });\n    }\n\n\n}\n\nexport const checkLogout = () => async (dispatch) => {\n\n    try {   \n\n            const res  = await axios(API_BASE_URL+\"/user/logout\", {\n                               method: \"get\",\n                               withCredentials: true\n                            });\n            const resp = res.data;\n\n            if (resp.status == true) {\n\n                 const user = resp.data;\n                 toast.success(resp.msg, {\n                   position: toast.POSITION.TOP_RIGHT,\n                 });\n                 dispatch(logoutUser());\n\n            }else{\n\n                toast.error(resp.msg, {\n                  position: toast.POSITION.TOP_RIGHT,\n                });\n            }\n\n    }catch (error) {\n\n            toast.error('Error during logout:'+error, {\n              position: toast.POSITION.TOP_RIGHT,\n            });\n    }\n\n\n}\n\n\n/*-------------------------------------------------\n| Create Redux Slice and Reducer Function\n---------------------------------------------------*/\n\n\nexport const loginApiSlice = createSlice({\n\n  name: 'user_action_api',\n  initialState,\n  reducers: {\n\n          loginUser: (state, action) => {\n\n                  state.isLoading   = false;\n                  state.authData    = action.payload;\n                  state.isError     = false; \n                  state.isUserLogin = true;\n                  state.userRoleId  = action.payload.role_id;\n                  state.userId      = action.payload._id;\n          },\n          logoutUser: (state,action) => {\n\n                  state.isLoading   = false;\n                  state.authData    = null;\n                  state.isError     = false; \n                  state.isUserLogin = false;\n                  state.userRoleId  = null;\n                  state.userId      = null;\n          }\n  }\n})\n\nexport const { loginUser, logoutUser } = loginApiSlice.actions;\nexport default loginApiSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}